# ef 

## Общая информация

EntityFramework - это ORM (Object-Relational Mapping) фреймворк для .NET, который позволяет работать с данными в базе данных в виде объектов. Он предоставляет множество преимуществ, таких как упрощение работы с базой данных, повышение производительности, уменьшение количества кода, улучшение безопасности при работе с данными и другие.

### Типы отношений между таблицами

EntityFramework поддерживает следующие типы отношений между таблицами: один к одному, один ко многим, многие ко многим.

### Подходы к созданию БД

#### Code First

Code First подход в EntityFramework позволяет создавать базу данных на основе классов сущностей (Entity), а не на основе уже существующей базы данных. 

Он работает следующим образом: сначала создается класс сущности, затем создается контекст базы данных, который настраивается на основе класса сущности. После этого можно использовать контекст для создания и изменения базы данных.

#### Database first

### Методы для выполнения запросов к базе данных

Для выполнения запросов к базе данных в EntityFramework используются следующие методы: LINQ to Entities (Language-Integrated Query), методы расширения `Queryable` и `DbSet`, SQL-запросы через методы `Database.SqlQuery` и `ExecuteSqlCommand`.

### Транзакции

Для управления транзакциями в EntityFramework используются методы контекста базы данных, такие как `SaveChanges`, `SaveChangesAsync`, `BeginTransaction`, `Commit`, `Rollback` и другие.

### Хранимые процедуры

Для работы с хранимыми процедурами в EntityFramework используются методы контекста базы данных, такие как `Database.SqlQuery` и `ExecuteSqlCommand`. Они позволяют вызывать хранимые процедуры и обрабатывать результаты их выполнения.

### Фильтрация

EntityFramework поддерживает различные типы фильтрации данных, включая фильтрацию по условию (`Where`), сортировку (`OrderBy`, `ThenBy`), группировку (`GroupBy`), ограничение количества записей (`Take`, `Skip`), агрегатные функции (`Sum`, `Count`, `Average`, `Min`, `Max`) и другие.

#### Работа с несколькими контекстами данных

Для работы с несколькими контекстами данных в EntityFramework можно использовать следующие методы:
- `DbContext.Database.UseTransaction(transaction)` - устанавливает транзакцию для контекста базы данных
- `DbContext.Database.BeginTransaction()` - начинает новую транзакцию для контекста базы данных
- `DbContext.Database.CommitTransaction()` - коммитит текущую транзакцию для контекста базы данных
- `DbContext.Database.RollbackTransaction()` - откатывает текущую транзакцию для контекста базы данных

### Типы наследования

EntityFramework поддерживает следующие типы наследования: Table per Hierarchy (TPH), Table per Type (TPT), Table per Concrete Type (TPC).

### Типы миграций

EntityFramework поддерживает следующие типы миграций: автоматические миграции и явные миграции. 

Автоматические миграции позволяют автоматически обновлять базу данных при изменении модели данных, а явные миграции позволяют создавать и применять миграции вручную.

### Кэширование 

EntityFramework поддерживает следующие типы кэширования данных: кэширование первого уровня (Local Cache), кэширование второго уровня (Query Cache) и кэширование третьего уровня (Result Cache).

### Профилирование и отладка запросов

Для профилирования и отладки запросов в EntityFramework можно использовать различные инструменты, такие как SQL Server Profiler, LINQPad, Entity Framework Profiler, MiniProfiler и другие.

### Агрегатные функции

EntityFramework поддерживает различные агрегатные функции, такие как `Sum`, `Count`, `Average`, `Min`, `Max` и другие.

### Индексы

EntityFramework поддерживает различные типы индексов, включая кластерные и некластерные индексы, уникальные индексы, полнотекстовые индексы и другие.

### Совместимые технологии для работы с базами данных

Вместе с EntityFramework можно использовать различные технологии для работы с базами данных, такие как ADO.NET, LINQ, Entity SQL, SQL Server Integration Services (SSIS) и другие.
