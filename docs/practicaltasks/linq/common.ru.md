# common

## Общая информация

LINQ (Language Integrated Query) - это технология, которая позволяет написать запросы к данным в C# или других языках .NET, используя выражения, которые интегрированы в язык программирования. LINQ работает с различными источниками данных, такими как коллекции, базы данных, XML-документы и т.д.

### EntityFramework

EntityFramework - это объектно-реляционный маппер (ORM), который позволяет работать с базами данных, используя объектно-ориентированный подход. 

EntityFramework отличается от LINQ to SQL тем, что он поддерживает более широкий спектр баз данных и имеет более продвинутые возможности, такие как ленивая загрузка и множественные отношения между таблицами.

Преимущества использования LINQ и EntityFramework включают удобство и гибкость при написании запросов, повышение производительности и безопасности за счет проверки типов во время компиляции, а также возможность работать с различными источниками данных.

### Операторы

Некоторые распространенные операторы LINQ включают `Where`, `Select`, `OrderBy`, `GroupBy`, `Join` и `Aggregate`. Они используются для фильтрации, выборки, сортировки, группировки и агрегирования данных.

Для выполнения сложных запросов к нескольким таблицам можно использовать оператор `Join`, который позволяет объединить данные из нескольких таблиц по заданному условию.

Для выполнения операций группировки, агрегирования и сортировки можно использовать операторы `GroupBy`, `Aggregate` и `OrderBy` соответственно. Они позволяют группировать данные по определенному полю, выполнять агрегатные функции (например, суммирование или подсчет количества элементов) и сортировать данные по заданному полю.

### Оптимизация

Для оптимизации запросов LINQ можно использовать индексы в базе данных, уменьшить количество вызовов к базе данных, использовать отложенную загрузку и т.д.

### Механизмы загрузки данных из БД

Ленивая загрузка - это механизм, который позволяет загружать данные из базы данных только при необходимости. Это может повысить производительность при работе с большими объемами данных. В EntityFramework ленивая загрузка настраивается с помощью метода `Include()`.

Нетерпеливая загрузка - это механизм, который позволяет загрузить все связанные данные сразу вместо того, чтобы делать отдельные запросы к базе данных. Это может быть полезно при работе с небольшими объемами данных. В EntityFramework нетерпеливая загрузка настраивается с помощью метода `Load()`.

### Интерфейсы 

`IQueryable` и `IEnumerable` - это интерфейсы, которые используются для работы с коллекциями данных в LINQ. 

Основное различие между ними заключается в том, что `IQueryable` позволяет строить запросы, которые будут выполнены на стороне сервера базы данных, тогда как `IEnumerable` выполняет запросы на стороне клиента.

## Задачи 

Задачи для работы с коллекциями с помощью LINQ:
1. Найти все элементы коллекции, у которых значение определенного свойства равно заданному.
2. Отсортировать коллекцию по заданному свойству.
3. Найти первый элемент коллекции, удовлетворяющий определенному условию.
4. Выбрать определенные свойства элементов коллекции и создать из них новую коллекцию.
5. Найти количество элементов коллекции, удовлетворяющих определенному условию.
6. Выбрать все элементы коллекции, которые содержат определенную подстроку в заданном свойстве.
7. Проверить, содержит ли коллекция элементы с определенным значением свойства.
8. Сгруппировать элементы коллекции по значению определенного свойства.
9. Выбрать n первых элементов коллекции, удовлетворяющих определенному условию.
10. Выбрать все элементы коллекции, у которых значение определенного свойства находится в заданном диапазоне.
11. Найти среднее значение определенного свойства всех элементов коллекции.
12. Выбрать все элементы коллекции, у которых значение определенного свойства является уникальным.
13. Объединить две коллекции и выбрать только те элементы, которые присутствуют в обеих коллекциях.
14. Выбрать все элементы коллекции, у которых значение определенного свойства не повторяется в других элементах коллекции.
15. Найти максимальное значение определенного свойства всех элементов коллекции.
16. Выбрать все элементы коллекции, у которых значение определенного свойства начинается с заданной буквы.
17. Сделать выборку из коллекции, удалив дубликаты элементов по определенному свойству.
18. Преобразовать коллекцию, заменив значения определенного свойства в каждом элементе на другое значение.
19. Выбрать все элементы коллекции, у которых значение определенного свойства равно одному из заданных значений.
20. Найти минимальное значение определенного свойства всех элементов коллекции.
21. Выбрать все элементы коллекции, у которых значение определенного свойства содержит только цифры.
22. Сделать выборку из коллекции, оставив только уникальные элементы по нескольким свойствам.
23. Преобразовать коллекцию, умножив значения определенного свойства в каждом элементе на заданное число.
24. Выбрать все элементы коллекции, у которых значение определенного свойства больше заданного значения.
25. Найти последний элемент коллекции, удовлетворяющий определенному условию.

Задачи для понимания lazy loading:
1. Создать запрос на выборку данных из базы данных с использованием lazy loading.
2. Изменить значение свойства объекта, полученного через lazy loading, и сохранить изменения в базе данных.
3. Проверить, что при использовании lazy loading данные из связанных таблиц загружаются только по мере необходимости.
4. Создать запрос на выборку данных из базы данных с использованием lazy loading и отложенной загрузки.
5. Изменить значение свойства объекта, полученного через lazy loading и отложенную загрузку, и сохранить изменения в базе данных.
6. Проверить, что при использовании отложенной загрузки данные из связанных таблиц загружаются только по мере необходимости.
7. Создать запрос на выборку данных из базы данных с использованием lazy loading и загрузки только определенных свойств объекта.
8. Изменить значение свойства объекта, полученного через lazy loading и загрузку только определенных свойств, и сохранить изменения в базе данных.
9. Проверить, что при использовании загрузки только определенных свойств данные из связанных таблиц загружаются только по мере необходимости.
10. Создать запрос на выборку данных из базы данных с использованием lazy loading и фильтрацией результатов.
11. Изменить значение свойства объекта, полученного через lazy loading и фильтрацию результатов, и сохранить изменения в базе данных.
12. Проверить, что при использовании фильтрации результатов данные из связанных таблиц загружаются только по мере необходимости.
13. Создать запрос на выборку данных из базы данных с использованием lazy loading и сортировкой результатов.
14. Изменить значение свойства объекта, полученного через lazy loading и сортировку результатов, и сохранить изменения в базе данных.
15. Проверить, что при использовании сортировки результатов данные из связанных таблиц загружаются только по мере необходимости.

Задачи для понимания explicit loading:
1. Создать запрос на выборку данных из базы данных с использованием explicit loading.
2. Изменить значение свойства объекта, полученного через explicit loading, и сохранить изменения в базе данных.
3. Проверить, что при использовании explicit loading данные из связанных таблиц загружаются только по мере необходимости.
4. Создать запрос на выборку данных из базы данных с использованием explicit loading и отложенной загрузки.
5. Изменить значение свойства объекта, полученного через explicit loading и отложенную загрузку, и сохранить изменения в базе данных.
6. Проверить, что при использовании отложенной загрузки данные из связанных таблиц загружаются только по мере необходимости.
7. Создать запрос на выборку данных из базы данных с использованием explicit loading и загрузки только определенных свойств объекта.
8. Изменить значение свойства объекта, полученного через explicit loading и загрузку только определенных свойств, и сохранить изменения в базе данных.
9. Проверить, что при использовании загрузки только определенных свойств данные из связанных таблиц загружаются только по мере необходимости.
10. Создать запрос на выборку данных из базы данных с использованием explicit loading и фильтрацией результатов.
11. Изменить значение свойства объекта, полученного через explicit loading и фильтрацию результатов, и сохранить изменения в базе данных.
12. Проверить, что при использовании фильтрации результатов данные из связанных таблиц загружаются только по мере необходимости.
13. Создать запрос на выборку данных из базы данных с использованием explicit loading и сортировкой результатов.
14. Изменить значение свойства объекта, полученного через explicit loading и сортировку результатов, и сохранить изменения в базе данных.
15. Проверить, что при использовании сортировки результатов данные из связанных таблиц загружаются только по мере необходимости.

Задачи для понимания eager loading:
1. Создать запрос на выборку данных из базы данных с использованием eager loading.
2. Изменить значение свойства объекта, полученного через eager loading, и сохранить изменения в базе данных.
3. Проверить, что при использовании eager loading все данные из связанных таблиц загружаются сразу.
4. Создать запрос на выборку данных из базы данных с использованием eager loading и отложенной загрузки.
5. Изменить значение свойства объекта, полученного через eager loading и отложенную загрузку, и сохранить изменения в базе данных.
6. Проверить, что при использовании отложенной загрузки данные из связанных таблиц загружаются только по мере необходимости.
7. Создать запрос на выборку данных из базы данных с использованием eager loading и загрузки только определенных свойств объекта.
8. Изменить значение свойства объекта, полученного через eager loading и загрузку только определенных свойств, и сохранить изменения в базе данных.
9. Проверить, что при использовании загрузки только определенных свойств все данные из связанных таблиц загружаются только по мере необходимости.
