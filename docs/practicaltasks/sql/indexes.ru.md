# indexes

PostgreSQL предоставляет несколько типов индексов: B-Tree, Hash, GiST, SP-GiST, GIN, BRIN и расширение Bloom. Каждый тип индекса использует свой алгоритм, который лучше всего подходит для разных типов запросов. По умолчанию команда CREATE INDEX создает индексы B-дерева, которые подходят для наиболее распространенных ситуаций.

## Теория 

### Автоматическое создание индекса с помощью ключевого слова SERIAL

Индексы для поля, помеченного как SERIAL, создаются автоматически в PostgreSQL. SERIAL - это псевдоним для создания столбца с типом данных INTEGER и связанной с ним последовательности (sequence). При создании столбца типа SERIAL, PostgreSQL автоматически создает последовательность и связывает ее с данным столбцом. Также автоматически создается индекс по данному столбцу для обеспечения быстрого доступа к данным.

### B-tree

B-tree - это структура данных, которая используется для хранения и быстрого поиска отсортированных данных. 

В контексте операции сравнения B-tree индексы обеспечивают более эффективный поиск для условий сравнения с использованием операторов <, <=, =, >=, >, а также для сравнения с использованием операторов BETWEEN и IN. 

### Hash

Hash - это структура данных, которая используется для хранения и быстрого поиска данных по хеш-значению ключа.

Hash индексы более эффективны для поиска точных значений ключа.

### GiST

Индексы GiST (Generalized Search Tree) используются для индексации нестандартных типов данных, таких как геометрические объекты, полнотекстовые данные и другие.

### SP-GiST

Индексы SP-GiST (Space-Partitioned Generalized Search Tree) - это расширение индексов GiST, которые используются для индексации данных с пространственной структурой, таких как деревья или графы.

Основное отличие индексов SP-GiST от GiST заключается в том, что SP-GiST использует разбиение пространства на части для более эффективного поиска.

### GIN

Индексы GIN (Generalized Inverted Index) используются для индексации полнотекстовых данных и массивов.

Основное отличие индексов GIN от SP-GiST и GiST заключается в том, что GIN используется для индексации массивов и полнотекстовых данных.

Индексы GIN более эффективны для поиска по массивам и полнотекстовым данным, чем b-tree и hash индексы.

### BRIN

Индексы BRIN (Block Range INdex) используются для индексации больших таблиц с упорядоченными данными, например, для индексации временных рядов.

Основное отличие индексов BRIN от SP-GiST и GiST заключается в том, что BRIN используется для индексации упорядоченных данных, а не для индексации пространственных или полнотекстовых данных.

Основное отличие индексов BRIN от GIN заключается в том, что BRIN используется для индексации упорядоченных данных, а GIN - для индексации массивов и полнотекстовых данных. Основное отличие индексов BRIN от b-tree и hash заключается в том, что BRIN используется для индексации упорядоченных данных, а b-tree и hash - для индексации неупорядоченных данных.

## Практические задачи 

B-tree индексы:
1. Создайте индекс на столбце "price" в таблице "products".
2. Удалите индекс на столбце "name" в таблице "users".
3. Измените индекс на столбце "age" в таблице "employees" на уникальный.
4. Создайте составной индекс на столбцах "city" и "state" в таблице "addresses".
5. Удалите индекс на столбце "email" в таблице "customers".
6. Измените индекс на столбце "created_at" в таблице "orders" на обратный порядок сортировки.
7. Создайте индекс на столбце "rating" в таблице "reviews".
8. Удалите составной индекс на столбцах "first_name" и "last_name" в таблице "employees".
9. Измените индекс на столбце "quantity" в таблице "orders" на индекс только для чтения.
10. Создайте индекс на столбце "category_id" в таблице "products".

Hash индексы:
1. Создайте хеш-индекс на столбце "username" в таблице "users".
2. Удалите хеш-индекс на столбце "zipcode" в таблице "addresses".
3. Измените хеш-индекс на столбце "phone_number" в таблице "customers" на уникальный.
4. Создайте хеш-индекс на столбце "product_id" в таблице "orders".
5. Удалите хеш-индекс на столбце "email" в таблице "employees".
6. Измените хеш-индекс на столбце "category" в таблице "products" на обратный порядок сортировки.
7. Создайте хеш-индекс на столбце "ip_address" в таблице "logs".
8. Удалите хеш-индекс на столбце "last_name" в таблице "employees".
9. Измените хеш-индекс на столбце "order_id" в таблице "order_items" на индекс только для чтения.
10. Создайте хеш-индекс на столбце "user_id" в таблице "reviews".

GiST индексы:
1. Создайте GiST-индекс на столбце "location" в таблице "stores".
2. Удалите GiST-индекс на столбце "polygon" в таблице "areas".
3. Измените GiST-индекс на столбце "path" в таблице "files" на уникальный.
4. Создайте GiST-индекс на столбце "line" в таблице "routes".
5. Удалите GiST-индекс на столбце "circle" в таблице "shapes".
6. Измените GiST-индекс на столбце "address" в таблице "companies" на обратный порядок сортировки.
7. Создайте GiST-индекс на столбце "point" в таблице "locations".
8. Удалите GiST-индекс на столбце "rectangle" в таблице "areas".
9. Измените GiST-индекс на столбце "start_time" в таблице "events" на индекс только для чтения.
10. Создайте GiST-индекс на столбце "geometry" в таблице "objects".

SP-GiST индексы:
1. Создайте SP-GiST-индекс на столбце "tree_path" в таблице "folders".
2. Удалите SP-GiST-индекс на столбце "polygon" в таблице "areas".
3. Измените SP-GiST-индекс на столбце "path" в таблице "files" на уникальный.
4. Создайте SP-GiST-индекс на столбце "line" в таблице "routes".
5. Удалите SP-GiST-индекс на столбце "circle" в таблице "shapes".
6. Измените SP-GiST-индекс на столбце "address" в таблице "companies" на обратный порядок сортировки.
7. Создайте SP-GiST-индекс на столбце "point" в таблице "locations".
8. Удалите SP-GiST-индекс на столбце "rectangle" в таблице "areas".
9. Измените SP-GiST-индекс на столбце "start_time" в таблице "events" на индекс только для чтения.
10. Создайте SP-GiST-индекс на столбце "geometry" в таблице "objects".

GIN индексы:
1. Создайте GIN-индекс на столбце "tags" в таблице "articles".
2. Удалите GIN-индекс на столбце "keywords" в таблице "products".
3. Измените GIN-индекс на столбце "categories" в таблице "items" на уникальный.
4. Создайте GIN-индекс на столбце "authors" в таблице "books".
5. Удалите GIN-индекс на столбце "description" в таблице "movies".
6. Измените GIN-индекс на столбце "genres" в таблице "songs" на обратный порядок сортировки.
7. Создайте GIN-индекс на столбце "ingredients" в таблице "recipes".
8. Удалите GIN-индекс на столбце "body" в таблице "messages".
9. Измените GIN-индекс на столбце "options" в таблице "products" на индекс только для чтения.
10. Создайте GIN-индекс на столбце "tags" в таблице "videos".

BRIN индексы:
1. Создайте BRIN-индекс на столбце "timestamp" в таблице "logs".
2. Удалите BRIN-индекс на столбце "price" в таблице "products".
3. Измените BRIN-индекс на столбце "date" в таблице "sales" на уникальный.
4. Создайте BRIN-индекс на столбце "time" в таблице "meetings".
5. Удалите BRIN-индекс на столбце "quantity" в таблице "orders".
6. Измените BRIN-индекс на столбце "score" в таблице "reviews" на обратный порядок сортировки.
7. Создайте BRIN-индекс на столбце "timestamp" в таблице "visits".
8. Удалите BRIN-индекс на столбце "rating" в таблице "products".
9. Измените BRIN-индекс на столбце "weight" в таблице "items" на индекс только для чтения.
10. Создайте BRIN-индекс на столбце "timestamp" в таблице "events".

